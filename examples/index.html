<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>face dazzler - for web</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css">
  <link rel="stylesheet" type="text/css" href="assets/styles.css">

<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js" type="text/javascript"></script>
  <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js" type="text/javascript"></script>
  
  <script src="./js/app.js" type="text/javascript"></script>
  
  <!-- TRACKING.JS -->
  <script src="http://trackingjs.com/bower/dat-gui/build/dat.gui.min.js"></script>
  <script src="tracking-min.js"></script>
  <script src="face-min.js"></script>
  <script src="eye-min.js"></script>
  <script src="mouth-min.js"></script>
  <script src="assets/stats.min.js"></script>

  <script>
  $(function() {
    $( "#accordion" ).accordion();
  });
  </script>

  <script>
  var allowDrop = function(e){
      e.preventDefault();
  }
  var drag = function(e){
      //store the position of the mouse relativly to the image position
      e.dataTransfer.setData("mouse_position_x",e.clientX - e.target.offsetLeft );
      e.dataTransfer.setData("mouse_position_y",e.clientY - e.target.offsetTop  );

      e.dataTransfer.setData("image_id",e.target.id);
  }
  var drop = function(e){
      e.preventDefault();
      var image = document.getElementById( e.dataTransfer.getData("image_id") );

      var mouse_position_x = e.dataTransfer.getData("mouse_position_x");
      var mouse_position_y = e.dataTransfer.getData("mouse_position_y");

      var droppableCanvas = document.getElementById('droppableCanvas');
      var ctx = droppableCanvas.getContext('2d');

      // the image is drawn on the canvas at the position of the mouse when we lifted the mouse button
      ctx.drawImage( image , e.clientX - droppableCanvas.offsetLeft - mouse_position_x , e.clientY - droppableCanvas.offsetTop - mouse_position_y );
  }
  var convertCanvasToImage = function(){
      var droppableCanvas = document.getElementById('droppableCanvas');

      var image_src = droppableCanvas.toDataURL("image/png");
      window.open(image_src);
  }
  </script>   
</head>
<body>

<nav>
  <h3>face dazzler <span style="color:#ccc;"><em>for web</em></span></h3>
    <!-- <button id="camera-on-button">turn camera back on</button> -->
    <!-- <button id="overlay-button">overlay 1</button> -->
    <!-- <input type="button" id="btnSave" value="Save PNG"/> -->
</nav>

<div id="main-container">

  <section id="landing-container">
    <div class="row">
      <div class="small-12 medium-5 large-5 columns">
        <h2 style="color:#ccc;">thwart facial detection with a couple clicks. </h2>
        <p>The Face Dazzler web application allows you a degree of protection against facial recognition technology online. <p>
        <p>Facial recognition technology is pervasive, from street-level security cameras to friends tagging us on Facebook. It's also invasive â€“ when our face is recognized, so is our identity. </p>
        <p>One way around this is to avoid having our face recognized as <em>a face </em> in the first place. </p>
      </div>
      <div class="small-12 medium-7 large-7 columns">
        <img src="./assets/cv-dazzle-screenshot.jpg" style="padding-top:15px">
        <p style="color:#999;"><em>Examples of hair and makeup styles that thwart facial detection, from CVDazzle.com</em></p>
      </div>
    </div>
    <div class="row centered grey">
      <div class="small-12 medium-4 large-4 columns">
          <p class="description">webcam</p>
          <p>Detect and dazzle your face using your webcam<br/><em>Experiment with CV Dazzle methods<br/> for thwarting facial recognition</em></p>
          <button name="go-to-webcam" id="go-to-webcam">Try with webcam</button>
      </div> 
      <div class="small-12 medium-4 large-4 columns">
          <p class="description">photo</p>
          <p>Detect and dazzle your face in a photo<br/><em>Experiment with adding digital camouflage<br/> to your face</em></p>
          <button name="go-to-static-image" id="go-to-static-image">Upload a photo</button>
      </div> 
      <div class="small-12 medium-4 large-4 columns">
          <p class="description">learn more</p>
          <p style="padding:0">Learn more about surveillance, facial recognition and facial detection<br/><em>Including more about this site</em></p>
          <button name="go-to-more" id="go-to-more">Learn more</button>
      </div>
    </div>
  </section>

  




  <div id="wrapper">
    <button id="runTracker-button">Use Webcam</button>
      <div class="demo-frame" id="demo-frame">
          <div class="demo-container">
              <video id="video" width="400" height="300" preload autoplay loop muted></video>
              <canvas id="canvas" width="400" height="300"></canvas>
          </div>
          <button id="capture">Take picture</button>
          <div id="sandbox">
            <canvas id="droppableCanvas" ondrop="drop(event)" ondragover="allowDrop(event)" width="400" height="300" style="border: 1px solid gray"></canvas>
          </div>
      </div>
      <div id="overlays">
          <img id="img1" draggable="true" ondragstart="drag(event)" src='http://fiddle.jshell.net/img/logo.png'/>
          <img id="img2" draggable="true" ondragstart="drag(event)" src='./assets/overlay-2.png'/>
          <!-- <input type="button" onclick="convertCanvasToImage()" value="Generate Image" style="float:right"/> -->
          <br/>
      </div>
  </div>




  <form id="form1" runat="server">
      <input type='file' id="imgInp" />
  </form>
  <button id="find-face-button">Detect face</button>
  <button id="find-eye-mouth-button">Detect eyes and mouth</button>
  <div class="static-image-frame">
      <img id="blah" crossOrigin="Anonymous" src="#" alt="this will be the new image to track" width="150px" />
  </div>
  <p id="status-face" class="status-face">There's a face</p>
  <p id="status-not-face" class="status-not-face">No face</p>

</div>
</body>
</html>
